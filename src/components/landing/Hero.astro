---
import Image from "astro/components/Image.astro";
import TigerAppsLogo from "../../assets/icons/circle.png";
---

<section id="hero" class="bg-white pt-28 pb-20 relative overflow-hidden">
    <!-- Playful floating shapes -->
    <div
        class="absolute top-20 left-10 w-16 h-16 rounded-2xl bg-pixar-yellow/30 rotate-12 animate-float-slow">
    </div>
    <div
        class="absolute top-40 right-20 w-12 h-12 rounded-full bg-pixar-blue/20 animate-float">
    </div>
    <div
        class="absolute bottom-20 left-1/4 w-20 h-20 rounded-3xl bg-pixar-green/20 -rotate-6 animate-float-slow">
    </div>
    <div
        class="absolute top-1/3 right-10 w-8 h-8 rounded-lg bg-pixar-pink/30 rotate-45 animate-float">
    </div>
    <div
        class="absolute bottom-32 right-1/3 w-14 h-14 rounded-2xl bg-pixar-purple/20 rotate-12 animate-float-slow">
    </div>

    <div class="cont text-center relative z-10">
        <div class="flex flex-col items-center max-w-3xl mx-auto gap-6">
            <!-- Logo with bounce -->
            <div class="w-20 sm:w-24 animate-bounce-in">
                <Image
                    src={TigerAppsLogo}
                    alt="TigerApps logo"
                    loading="eager"
                />
            </div>

            <!-- Fun headline -->
            <h1 class="animate-fade-in-up delay-1">
                Apps for
                <span class="relative inline-block">
                    <span class="relative z-10">Princeton</span>
                    <svg
                        class="absolute -bottom-2 left-0 w-full h-3"
                        viewBox="0 0 200 12"
                        preserveAspectRatio="none">
                        <path
                            d="M0,8 Q50,0 100,8 T200,8"
                            fill="none"
                            stroke="#FFE066"
                            stroke-width="6"
                            stroke-linecap="round"></path>
                    </svg>
                </span>
            </h1>

            <!-- Subtitle -->
            <p
                class="text-lg md:text-xl text-gray max-w-xl leading-relaxed animate-fade-in-up delay-2">
                Student-built tools to enhance your campus experience. Built
                with care, funded by USG.
            </p>

            <!-- CTA section -->
            <div
                class="flex flex-wrap gap-3 justify-center items-center animate-fade-in-up delay-3">
                <button
                    onclick="document.getElementById('apps').scrollIntoView({ behavior: 'smooth' })"
                    class="bg-pixar-blue text-white px-6 py-3 rounded-full font-bold hover:bg-primary-dark transition-all duration-200 shadow-blue hover:shadow-pop-lg hover:-translate-y-0.5">
                    Explore Apps
                </button>

                <!-- Copyable email chip -->
                <div class="relative">
                    <button
                        id="email-chip"
                        class="group bg-light border-2 border-light-mid px-5 py-2.5 rounded-full font-medium text-gray hover:border-pixar-purple/50 hover:bg-pixar-purple/5 transition-all duration-200 flex items-center gap-2">
                        <span class="text-sm">it.admin@tigerapps.org</span>
                        <svg
                            id="copy-icon"
                            class="w-4 h-4 text-gray group-hover:text-pixar-purple transition-all duration-200"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                            stroke-width="2">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9.75a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184"
                            ></path>
                        </svg>
                        <svg
                            id="check-icon"
                            class="w-4 h-4 text-pixar-green absolute right-5 opacity-0 scale-0 transition-all duration-200"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                            stroke-width="2.5">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M4.5 12.75l6 6 9-13.5"></path>
                        </svg>
                    </button>
                    <!-- Tooltip -->
                    <span
                        id="copy-tooltip"
                        class="absolute -top-10 left-1/2 -translate-x-1/2 px-3 py-1.5 bg-gray-dark text-white text-xs font-semibold rounded-lg opacity-0 scale-90 transition-all duration-200 pointer-events-none whitespace-nowrap">
                        Copied!
                        <span
                            class="absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-gray-dark"
                        ></span>
                    </span>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    @keyframes float {
        0%,
        100% {
            transform: translateY(0) rotate(var(--rotate, 0deg));
        }
        50% {
            transform: translateY(-15px) rotate(var(--rotate, 0deg));
        }
    }

    @keyframes float-slow {
        0%,
        100% {
            transform: translateY(0) rotate(var(--rotate, 12deg));
        }
        50% {
            transform: translateY(-10px)
                rotate(calc(var(--rotate, 12deg) + 3deg));
        }
    }

    .animate-float {
        animation: float 4s ease-in-out infinite;
    }

    .animate-float-slow {
        animation: float-slow 6s ease-in-out infinite;
    }
</style>

<script>
    const emailChip = document.getElementById("email-chip");
    const copyTooltip = document.getElementById("copy-tooltip");
    const copyIcon = document.getElementById("copy-icon");
    const checkIcon = document.getElementById("check-icon");

    emailChip?.addEventListener("click", async () => {
        try {
            await navigator.clipboard.writeText("it.admin@tigerapps.org");

            // Show tooltip
            if (copyTooltip) {
                copyTooltip.style.opacity = "1";
                copyTooltip.style.transform = "translateX(-50%) scale(1)";
            }

            // Swap icons
            if (copyIcon && checkIcon) {
                copyIcon.style.opacity = "0";
                copyIcon.style.transform = "scale(0)";
                checkIcon.style.opacity = "1";
                checkIcon.style.transform = "scale(1)";
            }

            // Reset after delay
            setTimeout(() => {
                if (copyTooltip) {
                    copyTooltip.style.opacity = "0";
                    copyTooltip.style.transform = "translateX(-50%) scale(0.9)";
                }
                if (copyIcon && checkIcon) {
                    copyIcon.style.opacity = "1";
                    copyIcon.style.transform = "scale(1)";
                    checkIcon.style.opacity = "0";
                    checkIcon.style.transform = "scale(0)";
                }
            }, 1500);
        } catch (err) {
            console.error("Failed to copy email:", err);
        }
    });
</script>
