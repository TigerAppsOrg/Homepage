---
import { Image } from "astro:assets";
import GithubIcon from "../../../assets/icons/github-mark.svg";
import type { AppProps } from "../../../utils/types";
import PersonList from "./PersonList.astro";

const {
    title,
    description,
    note,
    webLink,
    repoLink,
    screenshot,
    alt,
    contributors,
    additionalContributors
} = Astro.props as AppProps;
---

<article
    class="bg-white rounded-lg shadow-lg border border-gray-100 hover:shadow-xl transition-shadow duration-300 overflow-hidden relative">
    <a href={webLink} target="_blank" class="relative group block">
        <Image
            src={screenshot}
            {alt}
            class="w-full aspect-video object-cover"
        />
        <div class="overlay">
            <div class="flex flex-col items-center justify-center space-y-2">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="text-white w-12 h-12">
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"
                    ></path>
                </svg>
                <span class="text-white font-semibold text-lg">Visit App</span>
            </div>
        </div>
    </a>

    <div class="p-6 pb-16">
        <a href={webLink} target="_blank">
            <h4
                class="text-xl font-bold mb-2 text-secondary hover:text-secondary-hover hover:underline transition-all">
                {title}
            </h4>
        </a>
        <div class="text-sm text-gray-600 space-y-2">
            <p class="leading-relaxed">
                {description}
            </p>
            <p class="italic">
                <PersonList startMsg="By" personList={contributors} />
                {
                    additionalContributors &&
                        additionalContributors.length > 0 &&
                        additionalContributors.map(section => (
                            <PersonList
                                startMsg={section.startMsg}
                                personList={section.contributors}
                            />
                        ))
                }
            </p>
            {note && <p class="italic text-gray-500">{note}</p>}
        </div>
    </div>

    {
        repoLink && (
            <a
                class="absolute bottom-3 right-3 bg-gray-100 hover:bg-gray-200 text-gray-600 hover:text-gray-800 px-2 py-1 rounded text-xs font-medium inline-flex items-center space-x-1 transition-colors border border-gray-200 hover:border-gray-300"
                href={repoLink}
                target="_blank"
                rel="noopener noreferrer">
                <Image
                    height="12"
                    width="12"
                    src={GithubIcon}
                    alt="GitHub Icon"
                />
                <span>Code</span>
            </a>
        )
    }
</article>

<style>
    .overlay {
        @apply absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center
        opacity-0 group-hover:opacity-100 transition-opacity duration-300;
    }
</style>
